<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Search</title>
 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.css">
 <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  </head>
  
  <body style=" color: gray">
    
    <nav class="light-blue lighten-1" role="navigation">
      <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo">Beersphere</a>
      
      <!--
      <div class="nav-wrapper container" posistion="center">
        <form id="beer-form" style="width: 30%;">
          <input type="text" id="beer-input"> <input id="find-beer" type="submit" value="Beer Search">
        </form></div> -->
        <ul class="right hide-on-med-and-down">
          <li><a href="index.html">Home</a></li></ul>
          
          <ul id="nav-mobile" class="side-nav">
            <li><a href="#">Navbar Link</a></li>
          </ul>
          
          <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
        </div>
      </nav>
      <div class="container">
        <form id="beer-form">
          <label for="beer-input">Search for a beer</label><br>
          <input type="text" id="beer-input" style="width: 80%;"><input id="find-beer" type="submit" value="GO" button class="btn waves-effect waves-light" style="margin-bottom: 20px;">
        </form>
      </div>
      <div class="container" id="beer-view" style="padding:10px;">
        
        <div class="row">
          <div class="col s12 m12 l3" id="dynoCard">
             <!-- Modal Trigger -->
  <!-- Modal Structure -->
  <div id="modal1" class="modal modal-fixed-footer">
    <div class="modal-content">
      <h4>Modal Header</h4>
      <p>A bunch of text</p>
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Agree</a>
    </div>
  </div>
            <!-- <p>
              <div class="card"> -->
                <!-- <div class="card-image waves-effect waves-block waves-light"> -->
                <!--         <img class="activator" style="margin:auto; width: auto; max-height: 350px; padding: 5px;" src="https://images.punkapi.com/v2/keg.png">
              </div>
              <div class="card-content">
                <span class="card-title activator grey-text text-darken-4">Buzz<i class="material-icons right">more_vert</i></span>
                
                
              </div>
              <div class="card-reveal">
                <span class="card-title grey-text text-darken-4">Buzz<i class="material-icons right">close</i></span>
                <i>"A Real Bitter Experience."</i><br>
                Company: <a href="#">here</a>
                <hr> A light, crisp and bitter IPA brewed with English and American hops. A small batch brewed only once<br>
                <p>Alchohol content: 4.5 <br>
                  Best paired with: Spicy chicken tikka masala <br>
                  Year brewed: 09/2007 <br>
                  Brewery: undefined <br>
                </p>
                <!-LikeBtn.com BEGIN
                <span class="likebtn-wrapper" data-identifier="item_1"></span>
                <script>(function(d,e,s){if(d.getElementById("likebtn_wjs"))return;a=d.createElement(e);m=d.getElementsByTagName(e)[0];a.async=1;a.id="likebtn_wjs";a.src=s;m.parentNode.insertBefore(a, m)})(document,"script","//w.likebtn.com/js/w/widget.js");</script>
                LikeBtn.com END -->
              </div>
            </div>
          </div>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
          
<script type="text/javascript">
          //   $(document).keypress(function(event){
          // var keycode = (event.keyCode ? event.keyCode : event.which);
          // if(keycode == '13'){
          //     // Here, it prevents the submit button from trying to submit a form when clicked
          //     event.preventDefault();  $('.modal').modal();
$(document).ready(function(){
          $('.modal').modal();
          $("#find-beer").on("click", function(event) {
          event.preventDefault();
          var beer = $("#beer-input").val();
          console.log("beer = " + beer)
          if (beer === ""){
          var queryURL = "https://api.punkapi.com/v2/beers/?page=2&per_page=60&" + beer
          console.log("no beer entered but here's a random beer " + beer)
          }
          else {
          var queryURL = "https://api.punkapi.com/v2/beers/?beer_name=" + beer ;
          console.log("user chosen beer " + beer)
          }
          $.ajax({
          url: queryURL,
          method: "GET"
          }).done(function(response) {
          console.log(response);
          for (var i = 0; i < response.length; i++) {
          var beerName = response[i].name;
          var beerTagline = response[i].tagline;
          var beerDescription = response[i].description;
          var beerImage = response[i].image_url;
          var beerAbv = response[i].abv;
          var beerFood = response[i].food_pairing[0];
          var malt = response[i].ingredients.malt;
          var hops = response[i].ingredients.hops;
          var yeast = response[i].ingredients.yeast;
          var beerBrewed = response[i].first_brewed;
          var beerBrewery = response[i].withBreweries;
          var beerOrganic = response[i].isOrganic;
          var convertSearchterm = JSON.stringify(response);
          for (var j = 0; j < malt.length; j++) {
          console.log( "ingredient " + malt[i].name + "value: " + malt[i].amount.value + "unit: " + malt[i].amount.unit)
          }
          for (var k = 0; k < hops.length; k++) {
          console.log( "ingredient " + hops[i].name + "value: " + hops[i].amount.value + "unit: " + hops[i].amount.unit)
          }
          for (var m = 0; m < yeast.length; m++) {
          console.log( "ingredient " + yeast)
          }
          // } //loop
          // document.getElementById(response.name);
          // var beerDiv= $("#beer-view").html(response.name);
          // beerDiv.append( "<h3>" + "NAME: " + beerName + "</h3>" + "<hr>" +  "TAGLINE: " + beerTagline + "<hr>" +  "LABEL: " + beerImage + "<hr>" + "DESCRIPTION: " + beerDescription + "<hr>" + "ALCHOHOL CONTENT: " + beerAbv + "<hr>" +  "FOOD PAIRINGS: " + beerFood + "<hr>" + "YEAR BREWED: " + beerBrewed + "<hr>" + "BREWERY: " + beerBrewery + "<hr>" + "ORGANIC: " + beerOrganic + "<hr>" + "INGREDIENTS: " );
          // // $("#beer-view").html("<hr>");
          var  beerCard = $('<div>')
            beerCard.addClass('card blue-grey darken-1')
            var beerContent = $('<div>')
              beerContent.addClass("card-content white-text")
              var cardSpan = $('<span>')
                cardSpan.addClass('card-title')
                cardSpan.html(response.name)
                beerContent.prepend(cardSpan)
                var cardText=$("<p>")
                  cardText.addClass('card-text')
                  cardText.append(beerFood)
                  beerContent.append(cardText)
                  var cardImage=$("<img>")
                  cardImage.addClass('card-image')
                  cardImage.css('height',"200px")
                  cardImage.attr('src',beerImage)
                  beerContent.append(cardImage)
                  var trigger=$('<button>')
                  trigger.addClass("waves-effect waves-light btn ")
                  trigger.attr("id",'trigger')
                  trigger.attr("data-target","modal1")
                  trigger.text("Get Recipes")
                  beerContent.append(trigger)
                  beerCard.append(beerContent)
                  $('#dynoCard').html(beerCard)
 $(".card").on("click","button", function(event) {
                  $('#modal1').modal('open');
})
                  // if (response.indexOf(beer) == undefined){
                  // var index = response.indexOf(beer)
                  // var id = response.indexOf(beer) + 1
                  // $("#beer-view").text("HA this exists at id# " + response.indexOf(beer) + 1 )
                  /*  <div class="row">
                    <div class="col s12 m6">
                      <div class="card blue-grey darken-1">
                        <div class="card-content white-text">
                          <span class="card-title">Card Title</span>
                          <p>I am a very simple card. I am good at containing small bits of information.
                          I am convenient because I require little markup to use effectively.</p>
                        </div>
                        <div class="card-action">
                          <a href="#">This is a link</a>
                          <a href="#">This is a link</a>
                        </div>
                      </div>
                    </div>
                  </div>
                  */
                  }
                  });
        });
})
                  
</script>
               
</body>
</html>